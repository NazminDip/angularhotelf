<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <script src="resources/bootstrap.min.js" type="text/javascript"></script>
        <script src="resources/angular.min.js" type="text/javascript"></script>
        
    </head>
    <body ng-app="simpleApp" ng-controller="simpleCtrl">
               
           
        <div class="container">
            <h1>
              Client Detail 
            </h1> 
            <input type="button" value="{{simples.length}}" class="btn btn-success btn-lg" />
            <div class="row">
                <div class="col-sm-6"> 
                    <form class="form-horizontal" ng-submit="submitSimple()">
  
                        <div class="form-group">
                            <label class="control-label col-sm-3" >Name</label>
                            <div class="col-sm-9">
                                <input class="form-control" ng-model="simpleForm.name"  />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-3" >Email</label>
                            <div class="col-sm-9">
                                <input class="form-control" ng-model="simpleForm.email"  />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-3" >Address</label>
                            <div class="col-sm-9">
                                <input class="form-control" ng-model="simpleForm.address"  />
                            </div>
                        </div>
                        
                         <div class="form-group">
                            <label class="control-label col-sm-3" >Dob</label>
                            <div class="col-sm-9">
                                <input class="form-control" ng-model="simpleForm.dob"  />
                            </div>
                        </div>


                         <div class="form-group">
                            <label class="control-label col-sm-3" >Mobile</label>
                            <div class="col-sm-9">
                                <input class="form-control" ng-model="simpleForm.mobile"  />
           
                            </div>
                        </div>



                        <input type="submit" value="Submit" class="btn btn-success btn-lg" />


                </div>
                <div class="col-sm-6">
                    <table class="table">
                             
         
           
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Address</th>
                            <th>Dob</th>
                             <th>Mobile</th>    
           
         
                        </tr>
                        <tr ng-repeat="simple in simples">
                       
                            <td> {{ simple.id}}</td>
                            <td> {{ simple.name|uppercase}}</td>
                            <td >{{ simple.email}}</td>  
                            <td >{{ simple.address}}</td>  
                            <td >{{ simple.dob}}</td>  
                            <td >{{ simple.mobile}}</td>  
                           

                            <td><a ng-click="editSimple(simple)" class="blue-button">Edit</a> | <a ng-click="deleteSimple(simple)" class="red-button">Delete</a></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>


        <script>
                    var app = angular.module("simpleApp", []);

                    app.controller("simpleCtrl", function ($scope, $http) {


                        $scope.simples = [];
                        $scope.simpleForm = {
                            id: -1,
                            name: "",
                            email: "",
                            address:"",
                            dob:"",
                            mobile:""
                        };

                        _refreshSimpleData();

                        $scope.submitSimple = function () {

                            var method = "";
                            var url = "";
                            if ($scope.simpleForm.id == -1) {
                                method = "POST";
                                url = 'service/simple';
                            } else {

                                method = "PUT";
                                url = 'service/simple/up/' + $scope.simpleForm.id;
                            }

                            $http({
                                method: method,
                                url: url,
                                data: angular.toJson($scope.simpleForm),
                                headers: {
                                    'Content-Type': 'application/json'
                                }
                            }).then(_success, _error);
                        };

                        //HTTP DELETE- delete Message by Id
                        $scope.deleteSimple = function (simple) {
                            $http({
                                method: 'DELETE',
                                url: 'service/simple/del/' + simple.id
                            }).then(_success, _error);
                        };

                        $scope.editSimple = function (simple) {
                            $scope.simpleForm.id = simple.id,
                                    $scope.simpleForm.name = simple.name,
                                    $scope.simpleForm.email = simple.email,
                                    $scope.simpleForm.address = simple.address,
                                    $scope.simpleForm.dob = simple.dob,
                                    $scope.simpleForm.mobile = simple.mobile
                        };

                        function _refreshSimpleData() {
                            $http({
                                method: 'GET',
                                url: 'http://localhost:8080/Hotel/service/simple'
                            }).then(function successCallback(response) {
                                $scope.simples = response.data;
                                console.log(response.data);
                            }, function errorCallback(response) {
                                console.log(response.statusText);
                            });
                        }

                        function _success(response) {
                            _refreshSimpleData();
                            _clearFormData()
                        }

                        function _error(response) {
                            console.log(response.statusText);
                        }


                        function _clearFormData() {
                            $scope.simpleForm.id = -1,
                                    $scope.simpleForm.name = "",
                                    $scope.simpleForm.email = "",
                                    $scope.simpleForm.address = "",
                                    $scope.simpleForm.dob = "",
                                    $scope.simpleForm.mobile = ""
                        }
                        ;

                    });
        </script>


</html>
